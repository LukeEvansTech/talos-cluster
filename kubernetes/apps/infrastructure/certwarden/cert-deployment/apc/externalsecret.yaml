---
# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/external-secrets.io/externalsecret_v1.json
# ExternalSecret for APC NMC host credentials
#
# This pulls credentials from 1Password for your APC NMC device.
#
# Required fields in 1Password:
#   APC_HOSTNAME    - Hostname or IP address of the APC NMC
#   APC_USERNAME    - Admin username for the APC NMC
#   APC_PASSWORD    - Password for the APC NMC
#   APC_FINGERPRINT - SSH host key fingerprint for the APC NMC
#
# Example 1Password item structure:
#   Item name: apc-ups-main
#   Fields:
#     - APC_HOSTNAME: ups.example.com
#     - APC_USERNAME: apc
#     - APC_PASSWORD: your-secure-password
#     - APC_FINGERPRINT: 123abc456def789...
#
# To get the SSH fingerprint, run:
#   ssh-keyscan -H <hostname> | ssh-keygen -lf -
#
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: apc-ups-main
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword
  target:
    name: apc-ups-main
  dataFrom:
    - extract:
        key: apc-ups-main
