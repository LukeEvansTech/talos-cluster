---
apiVersion: v1
kind: ConfigMap
metadata:
  name: kometa-configmap
data:
  config.yml: |
    ---
    libraries:
      Movies:
        run_order:
          - collections
          - metadata
          - operations
          - overlays
        collection_files:
          - repo: Movies.yml
          - default: basic
          - default: imdb
        overlay_files:
          - remove_overlays: false
          - repo: Movies - Overlays - Charts.yml
          - repo: Movies - Overlays - Ratings.yml
          - repo: Movies - Overlays - Streaming Services.yml
          - repo: Movies - Overlays - Studios.yml
        operations:
          mass_genre_update: imdb
          mass_content_rating_update: omdb
          mass_audience_rating_update: mdb_tomatoesaudience
          mass_critic_rating_update: mdb_metacritic
          mass_user_rating_update: imdb

      TV Shows:
        run_order:
          - collections
          - metadata
          - operations
          - overlays
        collection_files:
          - repo: TV Shows.yml
          - default: basic
          - default: imdb
        overlay_files:
          - remove_overlays: false
          - repo: TV Shows - Overlays - Charts.yml
          - repo: TV Shows - Overlays - Networks.yml
          - repo: TV Shows - Overlays - Ratings.yml
          - repo: TV Shows - Overlays - Statuses.yml
          - repo: TV Shows - Overlays - Streaming Services.yml
        operations:
          mass_genre_update: tmdb
          mass_content_rating_update: omdb
          mass_audience_rating_update: mdb_tomatoesaudience
          mass_critic_rating_update: mdb_metacritic
          mass_user_rating_update: imdb

    settings:
      cache: true
      cache_expiration: 60
      asset_directory: config/assets
      asset_folders: false
      asset_depth: 0
      create_asset_folders: false
      prioritize_assets: false
      dimensional_asset_rename: false
      download_url_assets: true
      show_missing_season_assets: false
      show_missing_episode_assets: false
      show_asset_not_needed: true
      sync_mode: sync
      minimum_items: 1
      delete_below_minimum: true
      delete_not_scheduled: false
      run_again_delay: 2
      missing_only_released: false
      only_filter_missing: false
      show_unmanaged: false
      show_filtered: false
      show_options: false
      show_missing: false
      show_missing_assets: false
      save_report: false
      tvdb_language: eng
      item_refresh_delay: 0
      playlist_sync_to_user: all
      playlist_report: false
      verify_ssl: true
      custom_repo: https://github.com/LukeEvansTech/talos-cluster/tree/main/kubernetes/apps/media/kometa/app/custom/
      check_nightly: false
      show_unconfigured: true

    mdblist:
      apikey: <<KOMETA_MDBLIST_API_KEY>>
      cache_expiration: 60

    omdb:
      apikey: <<KOMETA_OMDB_API_KEY>>
      cache_expiration: 60

    plex:
      url: http://plex.media.svc.cluster.local:32400
      token: <<KOMETA_PLEX_TOKEN>>
      timeout: 60
      clean_bundles: false
      empty_trash: false
      optimize: false

    radarr:
      url: http://radarr.media.svc.cluster.local
      token: <<KOMETA_RADARR_API_KEY>>
      add_missing: false
      add_existing: false
      root_folder_path: /movies
      monitor: true
      availability: announced
      quality_profile: HD
      search: false
      upgrade_existing: false

    sonarr:
      url: http://sonarr.media.svc.cluster.local
      token: <<KOMETA_SONARR_API_KEY>>
      add_missing: false
      add_existing: false
      root_folder_path: /tv
      monitor: all
      quality_profile: HD
      language_profile: English
      series_type: standard
      season_folder: true
      search: false
      cutoff_search: false
      upgrade_existing: false

    tautulli:
      url: http://tautulli.media.svc.cluster.local
      apikey: <<KOMETA_TAUTULLI_API_KEY>>

    tmdb:
      apikey: <<KOMETA_TMDB_API_KEY>>
      language: en
      cache_expiration: 60

    trakt:
      client_id: <<KOMETA_TRAKT_CLIENT_ID>>
      client_secret: <<KOMETA_TRAKT_CLIENT_SECRET>>
      authorization:
        access_token: <<KOMETA_TRAKT_ACCESS_TOKEN>>
        token_type: Bearer
        expires_in: <<KOMETA_TRAKT_EXPIRES_IN>>
        refresh_token: <<KOMETA_TRAKT_REFRESH_TOKEN>>
        scope: public
        created_at: <<KOMETA_TRAKT_CREATED_AT>>
